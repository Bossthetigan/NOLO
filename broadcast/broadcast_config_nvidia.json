{
  "max_restarts": 999999,
  "health_timeout_seconds": 15,
  "restart_delay_seconds": 1,
  "log_file": "broadcast.log",
  
  "enable_local_recording": false,
  "recording_path": "./recordings",
  "segment_duration_seconds": 3600,
  "max_recording_days": 7,
  "create_playlist": true,
  
  "ffmpeg_args": [
    "-re",
    "-thread_queue_size", "1024",
    "-i", "rtmp://192.168.0.12/live/stream",
    "-thread_queue_size", "512", 
    "-i", "rtsp://admin:password1@192.168.0.59:554/Streaming/Channels/201",
    "-map", "0:v:0", "-map", "1:a:0", "-shortest",
    "-fflags", "+genpts+discardcorrupt+flush_packets",
    "-r", "30", "-g", "60", "-keyint_min", "60",
    "-vf", "scale=2560:1440,drawtext=textfile=/tmp/commentary.txt:fontsize=40:fontcolor=white:x=(w-tw)/2:y=h-th-50:box=1:boxcolor=black@0.5:boxborderw=5:reload=1",
    "-c:v", "h264_nvenc", "-preset", "p7", "-profile:v", "high",
    "-b:v", "16000k", "-maxrate", "18000k", "-bufsize", "32000k",
    "-rc", "vbr", "-cq", "23", "-spatial_aq", "1", "-temporal_aq", "1",
    "-pix_fmt", "yuv420p", "-force_key_frames", "expr:gte(t,n_forced*2)",
    "-rtbufsize", "32000k",
    "-max_delay", "5000000",
    "-c:a", "aac", "-b:a", "128k", "-ac", "2", "-ar", "48000",
    "-async", "1", "-fps_mode", "cfr",
    "-f", "flv", "rtmp://a.rtmp.youtube.com/live2/hv9f-xv8d-8vq3-fg7f-3gub",
    "-c:v", "copy", "-c:a", "aac", "-f", "segment", "-segment_time", "3600", "-segment_format", "mp4", "-strftime", "1", "./recordings/cam_%Y%m%d_%H%M%S.mp4"
  ]
} 